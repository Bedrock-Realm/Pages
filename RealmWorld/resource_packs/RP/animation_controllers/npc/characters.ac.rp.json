{
  "format_version": "1.10.0",
  "animation_controllers": {
    "controller.animation.spark_skittles.character.general": {
      "initial_state": "idle",
      "states": {
        "idle": {
          "animations": ["anim.idle"],
          "transitions": [
            { "idle_special": "v.timer_anim_idle_special <= 0 && !q.is_riding && !v.prevent_idle_special" },
            { "moving": "query.ground_speed > (v.min_walk_speed ?? 0.5)" }
          ],
          "blend_transition": 0.3
        },
        "idle_special": {
          "on_entry": ["v.is_in_idle_special = 1;"],
          "on_exit": [
            "v.is_in_idle_special = 0;",
            "variable.mouth_type = 1;",
            "variable.eye_left_type = 1;",
            "variable.eye_right_type = 1;"
          ],
          "animations": ["anim.idle_special"],
          "blend_transition": 0.3,
          "transitions": [
            { "moving": "query.ground_speed > (v.min_walk_speed ?? 0.5)" },
            { "idle": "q.any_animation_finished" }
          ]
        },
        "moving": {
          "animations": [{ "anim.move": "!q.is_riding" }],
          "transitions": [{ "idle": "query.ground_speed < ((v.min_walk_speed ?? 0.5) * 0.55)" }],
          "blend_transition": 0.3
        }
      }
    },
    "controller.animation.spark_skittles.character.general.alt": {
      "initial_state": "idle",
      "states": {
        "idle": {
          "animations": ["anim.idle.alt"],
          "transitions": [
            { "idle_special": "v.timer_anim_idle_special_alt <= 0 && !q.is_riding && !v.prevent_idle_special" },
            { "moving": "query.ground_speed > (v.min_walk_speed ?? 0.5)" }
          ],
          "blend_transition": 0.3
        },
        "idle_special": {
          "on_entry": ["v.is_in_idle_special_alt = 1;"],
          "on_exit": [
            "v.is_in_idle_special_alt = 0;",
            "variable.mouth_type = 1;",
            "variable.eye_left_type = 1;",
            "variable.eye_right_type = 1;"
          ],
          "animations": ["anim.idle_special.alt"],
          "blend_transition": 0.3,
          "transitions": [
            { "moving": "query.ground_speed > (v.min_walk_speed ?? 0.5)" },
            { "idle": "q.any_animation_finished" }
          ]
        },
        "moving": {
          "animations": [{ "anim.move.alt": "!q.is_riding" }],
          "transitions": [{ "idle": "query.ground_speed < ((v.min_walk_speed ?? 0.5) * 0.55)" }],
          "blend_transition": 0.3
        }
      }
    },
    "controller.animation.spark_skittles.npc.lookat": {
      "initial_state": "default",
      "states": {
        "default": {
          "transitions": [
            { "adjust": "q.distance_from_camera < v.look_at_cutoff" },
            { "look_at": "Math.abs(v.lookat_delta) > 21" }
          ],
          "blend_transition": 0.0,
          "blend_via_shortest_path": true
        },
        "look_at": {
          "animations": ["anim.look_at"],
          "transitions": [
            { "look_at": "q.state_time > 0.1 && q.distance_from_camera > v.look_at_cutoff + 1" },
            { "adjust": "q.state_time > 0.1 && Math.abs(v.lookat_delta) > 60" }
          ],
          "blend_transition": 0.05
        },
        "adjust": {
          "animations": ["anim.rotate", "anim.look_at"],
          "transitions": [{ "look_at": "Math.abs(v.lookat_delta) < 22 && q.all_animations_finished" }],
          "blend_transition": 0.05
        }
      }
    }
  }
}
